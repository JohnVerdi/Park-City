(function(b){b.jPanelMenu=function(a){if(typeof(a)=="undefined"||a==null){a={}}var d={options:b.extend({menu:"#menu",panel:"body",trigger:".menu-trigger",excludedPanelContent:"style, script",clone:true,keepEventHandlers:false,direction:"left",openPosition:"250px",animated:true,closeOnContentClick:true,keyboardShortcuts:[{code:27,open:false,close:true},{code:37,open:false,close:true},{code:39,open:true,close:true},{code:77,open:true,close:true}],duration:150,openDuration:a.duration||150,closeDuration:a.duration||150,easing:"ease-in-out",openEasing:a.easing||"ease-in-out",closeEasing:a.easing||"ease-in-out",before:function(){},beforeOpen:function(){},beforeClose:function(){},after:function(){},afterOpen:function(){},afterClose:function(){},beforeOn:function(){},afterOn:function(){},beforeOff:function(){},afterOff:function(){}},a),settings:{transitionsSupported:"WebkitTransition" in document.body.style||"MozTransition" in document.body.style||"msTransition" in document.body.style||"OTransition" in document.body.style||"Transition" in document.body.style,transformsSupported:"WebkitTransform" in document.body.style||"MozTransform" in document.body.style||"msTransform" in document.body.style||"OTransform" in document.body.style||"Transform" in document.body.style,cssPrefix:"",panelPosition:"static",positionUnits:"px"},menu:"#jPanelMenu-menu",panel:".jPanelMenu-panel",timeouts:{},clearTimeouts:function(){clearTimeout(d.timeouts.open);clearTimeout(d.timeouts.afterOpen);clearTimeout(d.timeouts.afterClose)},setPositionUnits:function(){var j=false,c=["%","px","em"];for(var h=0;h<c.length;h++){var i=c[h];if(d.options.openPosition.toString().substr(-i.length)==i){j=true;d.settings.positionUnits=i}}if(!j){d.options.openPosition=parseInt(d.options.openPosition)+d.settings.positionUnits}},computePositionStyle:function(m,n){var p=(m)?d.options.openPosition:"0"+d.settings.positionUnits;var l={};if(d.settings.transformsSupported){var k=(m&&d.options.direction=="right")?"-":"";var c="translate3d("+k+p+",0,0)";var o="transform";if(n){l="";if(d.settings.cssPrefix!=""){l=d.settings.cssPrefix+o+":"+c+";"}l+=o+":"+c+";"}else{if(d.settings.cssPrefix!=""){l[d.settings.cssPrefix+o]=c}l[o]=c}}else{if(n){l="";l=d.options.direction+": "+p+";"}else{l[d.options.direction]=p}}return l},setCSSPrefix:function(){d.settings.cssPrefix=d.getCSSPrefix()},setjPanelMenuStyles:function(){var i="background:#fff",h=b("html").css("background-color"),j=b("body").css("background-color");var c=function(f){var e=[];b.each(["background-color","background-image","background-position","background-repeat","background-attachment","background-size","background-clip"],function(l,g){if(f.css(g)!==""){e.push(g+":"+f.css(g))}});return e.join(";")};if(j!=="transparent"&&j!=="rgba(0, 0, 0, 0)"){i=c(b("body"))}else{if(h!=="transparent"&&h!=="rgba(0, 0, 0, 0)"){i=c(b("html"))}}if(b("#jPanelMenu-style-master").length==0){b("body").append('<style id="jPanelMenu-style-master">body{width:100%}.jPanelMenu,body{overflow-x:hidden}#jPanelMenu-menu{display:block;position:fixed;top:0;'+d.options.direction+":0;height:100%;z-index:-1;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch}.jPanelMenu-panel{position:static;"+d.options.direction+":0;top:0;z-index:2;width:100%;min-height:100%;"+i+";}</style>")}},setMenuState:function(c){var f=(c)?"open":"closed";b(d.options.panel).attr("data-menu-position",f)},getMenuState:function(){return b(d.options.panel).attr("data-menu-position")},menuIsOpen:function(){if(d.getMenuState()=="open"){return true}else{return false}},setMenuStyle:function(c){b(d.menu).css(c)},setPanelStyle:function(c){b(d.panel).css(c)},showMenu:function(){d.setMenuStyle({display:"block"});d.setMenuStyle({"z-index":"1"})},hideMenu:function(){d.setMenuStyle({"z-index":"-1"});d.setMenuStyle({display:"none"})},enableTransitions:function(i,c){var h=i/1000;var j=d.getCSSEasingFunction(c);d.disableTransitions();b("body").append('<style id="jPanelMenu-style-transitions">.jPanelMenu-panel{'+d.settings.cssPrefix+"transition: all "+h+"s "+j+"; transition: all "+h+"s "+j+";}</style>")},disableTransitions:function(){b("#jPanelMenu-style-transitions").remove()},getCSSEasingFunction:function(c){switch(c){case"linear":return c;break;case"ease":return c;break;case"ease-in":return c;break;case"ease-out":return c;break;case"ease-in-out":return c;break;default:return"ease-in-out";break}},getJSEasingFunction:function(c){switch(c){case"linear":return c;break;default:return"swing";break}},getVendorPrefix:function(){if("result" in arguments.callee){return arguments.callee.result}var h=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/;var c=document.getElementsByTagName("script")[0];for(var g in c.style){if(h.test(g)){return arguments.callee.result=g.match(h)[0]}}if("WebkitOpacity" in c.style){return arguments.callee.result="Webkit"}if("KhtmlOpacity" in c.style){return arguments.callee.result="Khtml"}return arguments.callee.result=""},getCSSPrefix:function(){var c=d.getVendorPrefix();if(c!=""){return"-"+c.toLowerCase()+"-"}return""},openMenu:function(i){if(typeof(i)=="undefined"||i==null){i=d.options.animated}d.clearTimeouts();d.options.before();d.options.beforeOpen();d.setMenuState(true);d.showMenu();var j={none:(!i)?true:false,transitions:(i&&d.settings.transitionsSupported)?true:false};if(j.transitions||j.none){if(j.none){d.disableTransitions()}if(j.transitions){d.enableTransitions(d.options.openDuration,d.options.openEasing)}var k=d.computePositionStyle(true);d.setPanelStyle(k);d.timeouts.afterOpen=setTimeout(function(){d.options.after();d.options.afterOpen();d.initiateContentClickListeners()},d.options.openDuration)}else{var l=d.getJSEasingFunction(d.options.openEasing);var c={};c[d.options.direction]=d.options.openPosition;b(d.panel).stop().animate(c,d.options.openDuration,l,function(){d.options.after();d.options.afterOpen();d.initiateContentClickListeners()})}},closeMenu:function(i){if(typeof(i)=="undefined"||i==null){i=d.options.animated}d.clearTimeouts();d.options.before();d.options.beforeClose();d.setMenuState(false);var j={none:(!i)?true:false,transitions:(i&&d.settings.transitionsSupported)?true:false};if(j.transitions||j.none){if(j.none){d.disableTransitions()}if(j.transitions){d.enableTransitions(d.options.closeDuration,d.options.closeEasing)}var k=d.computePositionStyle();d.setPanelStyle(k);d.timeouts.afterClose=setTimeout(function(){d.disableTransitions();d.hideMenu();d.options.after();d.options.afterClose();d.destroyContentClickListeners()},d.options.closeDuration)}else{var l=d.getJSEasingFunction(d.options.closeEasing);var c={};c[d.options.direction]=0+d.settings.positionUnits;b(d.panel).stop().animate(c,d.options.closeDuration,l,function(){d.hideMenu();d.options.after();d.options.afterClose();d.destroyContentClickListeners()})}},triggerMenu:function(c){if(d.menuIsOpen()){d.closeMenu(c)}else{d.openMenu(c)}},initiateClickListeners:function(){b(document).on("click touchend",d.options.trigger,function(c){d.triggerMenu(d.options.animated);c.preventDefault()})},destroyClickListeners:function(){b(document).off("click touchend",d.options.trigger,null)},initiateContentClickListeners:function(){if(!d.options.closeOnContentClick){return false}b(document).on("click touchend",d.panel,function(c){if(d.menuIsOpen()){d.closeMenu(d.options.animated)}c.preventDefault()})},destroyContentClickListeners:function(){if(!d.options.closeOnContentClick){return false}b(document).off("click touchend",d.panel,null)},initiateKeyboardListeners:function(){var c=["input","textarea","select"];b(document).on("keydown",function(e){var j=b(e.target),l=false;b.each(c,function(){if(j.is(this.toString())){l=true}});if(l){return true}for(mapping in d.options.keyboardShortcuts){if(e.which==d.options.keyboardShortcuts[mapping].code){var k=d.options.keyboardShortcuts[mapping];if(k.open&&k.close){d.triggerMenu(d.options.animated)}else{if((k.open&&!k.close)&&!d.menuIsOpen()){d.openMenu(d.options.animated)}else{if((!k.open&&k.close)&&d.menuIsOpen()){d.closeMenu(d.options.animated)}}}e.preventDefault()}}})},destroyKeyboardListeners:function(){b(document).off("keydown",null)},setupMarkup:function(){b("html").addClass("jPanelMenu");b(d.options.panel+" > *").not(d.menu+", "+d.options.excludedPanelContent).wrapAll('<div class="'+d.panel.replace(".","")+'"/>');var c=(d.options.clone)?b(d.options.menu).clone(d.options.keepEventHandlers):b(d.options.menu);c.attr("id",d.menu.replace("#","")).insertAfter(d.options.panel+" > "+d.panel)},resetMarkup:function(){b("html").removeClass("jPanelMenu");b(d.options.panel+" > "+d.panel+" > *").unwrap();b(d.menu).remove()},init:function(){d.options.beforeOn();d.setPositionUnits();d.setCSSPrefix();d.initiateClickListeners();if(Object.prototype.toString.call(d.options.keyboardShortcuts)==="[object Array]"){d.initiateKeyboardListeners()}d.setjPanelMenuStyles();d.setMenuState(false);d.setupMarkup();d.setPanelStyle({position:((d.options.animated&&d.settings.panelPosition==="static")?"relative":d.settings.panelPosition)});d.setMenuStyle({width:d.options.openPosition});d.closeMenu(false);d.options.afterOn()},destroy:function(){d.options.beforeOff();d.closeMenu();d.destroyClickListeners();if(Object.prototype.toString.call(d.options.keyboardShortcuts)==="[object Array]"){d.destroyKeyboardListeners()}d.resetMarkup();var c={};c[d.options.direction]="auto";d.options.afterOff()}};return{on:d.init,off:d.destroy,trigger:d.triggerMenu,open:d.openMenu,close:d.closeMenu,isOpen:d.menuIsOpen,menu:d.menu,getMenu:function(){return b(d.menu)},panel:d.panel,getPanel:function(){return b(d.panel)},setPosition:function(c){if(typeof(c)=="undefined"||c==null){c=d.options.openPosition}d.options.openPosition=c;d.setMenuStyle({width:d.options.openPosition})}}}})(jQuery);