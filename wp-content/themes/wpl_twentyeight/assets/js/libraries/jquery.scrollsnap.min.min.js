(function(c){function d(l,a,o){var b,n,m,k,p;return function(){m=this;n=arguments;k=new Date();var e=function(){var g=(new Date())-k;if(g<a){b=setTimeout(e,a-g)}else{b=null;if(!o){p=l.apply(m,n)}}};var f=o&&!b;if(!b){b=setTimeout(e,a)}if(f){p=l.apply(m,n)}return p}}c.fn.scrollsnap=function(h){var a=c.extend({direction:"y",snaps:"*",proximity:12,offset:0,duration:200,latency:250,easing:"swing",onSnapEvent:"scrollsnap",onSnap:function(e,f){},onSnapWait:50},h);var j=a.direction==="x"?"Left":"Top",b="offset"+j,i="scroll"+j;return this.each(function(){var e=this,n=c(this);if(e.nodeType==1){n.css("position","relative");var g=null;var m=function(l){var s=null,k=a.proximity+1;n.find(a.snaps).each(function(){var o=this,p=Math.abs(o[b]+a.offset-e[i]);if(p<k){s=o;k=p}});if(s){var v=s[b]+a.offset,t={},u=c(s);t[i]=v;if(Math.abs(n[i]()-v)>2){n.animate(t,a.duration,a.easing,d(function(){if(a.onSnap){a.onSnap(u)}u.trigger(a.onSnapEvent)},a.onSnapWait))}else{if(v!==g){if(a.onSnap){a.onSnap(u,true)}}}g=v}};n.bind("scrollstop",{latency:a.latency},m)}else{if(e.nodeType==9){var f=(e.defaultView||e.parentWindow);var g=null;var m=function(l){var s=null,k=a.proximity+1;c(e).find(a.snaps).each(function(){var p=(typeof f.scrollX!="undefined")?"scroll"+a.direction.toUpperCase():"page"+a.direction.toUpperCase()+"Offset";var o=this,q=Math.abs((c(o).offset()[j.toLowerCase()]+a.offset)-f[p]);if(q<k){s=o;k=q}});if(s){var t=c(s),v=t.offset()[j.toLowerCase()]+a.offset,u={};u[i]=v;if(Math.abs(n[i]()-v)>2){c("html, body").animate(u,a.duration,a.easing,d(function(){if(a.onSnap){a.onSnap(t)}t.trigger(a.onSnapEvent)},a.onSnapWait))}else{if(v!==g){if(a.onSnap){a.onSnap(t,true)}}}g=v}};n.bind("scrollstop",{latency:a.latency},m);c(f).bind("resize",m)}}})}})(jQuery);